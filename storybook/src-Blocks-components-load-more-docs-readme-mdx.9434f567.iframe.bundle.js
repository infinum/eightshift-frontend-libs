(self.webpackChunk_eightshift_frontend_libs=self.webpackChunk_eightshift_frontend_libs||[]).push([[1060,4584],{"./blocks/init/src/Blocks/components/load-more/docs/readme.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_Users_ruzevic_projects_infinum_develop_eightshift_frontend_libs_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),_story_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./blocks/init/src/Blocks/components/load-more/docs/story.js");function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",ol:"ol",li:"li",h3:"h3"},(0,_Users_ruzevic_projects_infinum_develop_eightshift_frontend_libs_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.MN)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Qb,{of:_story_js__WEBPACK_IMPORTED_MODULE_4__,name:"About"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"load-more-component",children:"Load More Component"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Component used to provide load more functionality to your project."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"implementation",children:"Implementation"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Open a terminal and type in this command inside your projects root:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-shell",children:"wp boilerplate blocks use-component --name=load-more\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"dependency",children:"Dependency"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"Load more component must be implemented in some other component because it can't work by itself.\nIt also depends on the PHP part of dynamic data that can be installed with this command:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-shell",children:"wp boilerplate create rest-route-load-more\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"how-does-it-work",children:"How does it work?"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.p,{children:"This example will use featured content block as an example:"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.ol,{children:["\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:"You have featured content block that must implement load more component."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["Container that will be used to provide new data got from load more must have ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"data-load-more-id"})," data attribute added."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["Load more and the container must have the same ID that will connect them. Load more component uses ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"loadMoreId"})," attribute for that."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["You must provide load more component ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"loadMoreQuery"})," attribute with encoded json string with all WP_Query args you want to use. In general this is the same query you use to provide the initial data."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["You must provide load more component ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"loadMoreType"})," attribute that will determine what map you will use in you dynamic data class to provide view output."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["You must provide load more component ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"loadMoreInitiaItems"})," attribute that contains the array of IDs for the initial loaded data in the DOM."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["Optional load more component ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"loadMorePerPageOverride"})," attribute is used to load different number of items than they are initially set in the DOM."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:"After all this items are connected and provided, when you click on the load more button it will make a request using JS on the admin ajax hook in your dynamic data class."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:"Dynamic data will provide the query data that you will map to your component view and provide the data back to the dom via ajax."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.li,{children:"In your component you must have partial view component that will map ids from the dynamic data to the actual output."}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.li,{children:["Keep in mind that you also must have ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"esBlocksLocalization"})," global variable provided with loadMoreRestUrl variable in your ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"EnqueueTheme"})," class."]}),"\n"]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"enqueuetheme",children:"EnqueueTheme"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-PHP",children:"\t/**\n\t * Get script localizations\n\t *\n\t * @return array<string, mixed>\n\t */\n\tprotected function getLocalizations(): array\n\t{\n\t\t$namespace = Config::getProjectRoutesNamespace();\n\t\t$version = Config::getProjectRoutesVersion();\n\n\t\treturn [\n\t\t\t'esBlocksLocalization' => [\n\t\t\t\t'loadMoreRestUrl' => \\get_rest_url(null, \"{$namespace}/{$version}/\" . LoadMoreRoute::LOAD_MORE_ROUTE),\n\t\t\t],\n\t\t];\n\t}\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"featured-content-block",children:"Featured Content block"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-PHP",children:"\t$loadMoreId = \"{$blockName}-{$unique}\"; // ID that connects div output.\n\n\t<div data-load-more-id=\"<?php echo esc_attr($loadMoreId); ?>\"></div> // Output DOM element.\n\n\techo Components::render(\n\t\t'load-more',\n\t\tComponents::props('loadMore', $attributes, [\n\t\t\t'loadMoreInitiaItems' => wp_json_encode($mainQuery->posts), // Initial posts array.\n\t\t\t'loadMoreQuery' => wp_json_encode($args), // Original WP_Query.\n\t\t\t'loadMoreId' => $loadMoreId, // ID that connects div output.\n\t\t\t'loadMoreType' => $blockName, // Identifier for block.\n\t\t]),\n\t\t'',\n\t\ttrue\n\t);\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"featured-content-partial-view",children:"Featured content partial view"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-PHP",children:"$items = $attributes['items'] ?? [];\n\n$output = [];\n\nif (!$items) {\n\treturn $output;\n}\n\nforeach ($items as $item) {\n\techo Components::render(\n\t\t'card',\n\t\tComponents::props(\n\t\t\t'card',\n\t\t\t[\n\t\t\t\t'cardHeadingContent' => get_the_title($item),\n\t\t\t\t'cardParagraphContent' => get_the_excerpt($item),\n\t\t\t\t'cardButtonUrl' => get_the_permalink($item),\n\t\t\t\t'cardButtonContent' => __('View More', 'eightshift-boilerplate'),\n\t\t\t\t'cardImageUrl' => \\get_the_post_thumbnail_url($item, 'large'),\n\t\t\t],\n\t\t),\n\t\t'',\n\t\ttrue\n\t);\n}\n\n"})}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"load-more-data-class",children:"Load more data class"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.pre,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{className:"language-PHP",children:"\t/**\n\t * Map load more data reponse with the component to provide to output.\n\t *\n\t * @param string $type Type of load more used, usually block name.\n\t * @param array<int> $response Response of IDs.\n\t *\n\t * @return string\n\t */\n\tpublic function getMappedData(string $type, array $response): string\n\t{\n\t\tswitch ($type) {\n\t\t\tcase 'featured-content':\n\t\t\t\treturn Components::renderPartial(\n\t\t\t\t\t'block',\n\t\t\t\t\t$type,\n\t\t\t\t\t'cards',\n\t\t\t\t\t[\n\t\t\t\t\t\t'items' => $response,\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n"})})]})}const __WEBPACK_DEFAULT_EXPORT__=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,_Users_ruzevic_projects_infinum_develop_eightshift_frontend_libs_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.MN)(),props.components);return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}},"./blocks/init/src/Blocks/components/load-more/docs/story.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,editor:()=>editor,options:()=>options});__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/react/index.js");var _eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./scripts/editor/registration.js"),_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./scripts/editor/attributes.js"),_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./scripts/editor/options.js"),_manifest_json__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./blocks/init/src/Blocks/components/load-more/manifest.json"),_components_load_more_editor__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./blocks/init/src/Blocks/components/load-more/components/load-more-editor.js"),_components_load_more_options__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./blocks/init/src/Blocks/components/load-more/components/load-more-options.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:String(i)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Load more"};var attributes=(0,_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_20__.Yz)("loadMore",_manifest_json__WEBPACK_IMPORTED_MODULE_21__),editor=function editor(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_components_load_more_editor__WEBPACK_IMPORTED_MODULE_22__.g,_objectSpread({},(0,_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_23__.ov)("loadMore",attributes)))};editor.displayName="editor";var options=function options(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_19__.jsx)(_components_load_more_options__WEBPACK_IMPORTED_MODULE_24__.Y,_objectSpread({},(0,_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_23__.ov)("loadMore",attributes,{options:(0,_eightshift_frontend_libs_scripts__WEBPACK_IMPORTED_MODULE_25__.KG)(attributes,_manifest_json__WEBPACK_IMPORTED_MODULE_21__)})))};options.displayName="options",editor.__docgenInfo={description:"",methods:[],displayName:"editor"},options.__docgenInfo={description:"",methods:[],displayName:"options"}},"./node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext},"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ck:()=>withMDXComponents,Eh:()=>MDXContext,Iu:()=>MDXProvider,MN:()=>useMDXComponents});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}}}]);